# PM2的原理是什么

## PM2原理

PM2会有自己的主进程，他会将应用作为子进程再启动起来，启动子应用的方式是fork、和cluster两种。

PM2的核心就是PM2本身是一个主进程，他会将应用程序作为作为子进程启动（fork），然后通过进程间通信的方式来实现进程状态的管理。

## 如何管理进程状态

进程状态， PM2通过fork（或cluster模块）来启动子进程（即应用程序）。如果子进程发生错误抛出异常时，会以信号的形式向父进程发送"自杀"消息，
发送完成后，会将自身的进程退出，此时父进程会再重新启动一个新的进程。

## 如何做到负载均衡

PM2在启动子进程时，会自行监听80端口，当监听的端口接收到消息时，通过向子进程发送消息的方式将监听的句柄发送给子进程，子进程在接受到。

> *句柄*是一种可以用来表示资源的引用，它的内部包含了指向对象的文件描述符。

解决
### PM2的两个模式——fork和cluster
