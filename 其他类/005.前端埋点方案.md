# 前端埋点方案

## 埋点手段

 1. 代码手动埋点：在业务代码中手动调用埋点方法，传入埋点上报需要的参数
 
 2. 可视化埋点：通过可视化的配置工具配置需要埋点的节点，在前端自动解析配置并上报埋点数据，从而实现可视化"无痕埋点"
 
 3. 无痕埋点：通过技术手段，完成对用户行为数据无差别的统计上传的工作。后期数据分析处理的时候通过技术手段筛选出合适的数据进行统计分析。
 
## 手动埋点

实现简单直接，即在指定的事件发生时，上报事先已经有埋点需求的信息。如：商品详情页的【加入购物车】按钮被点击事件。

 * 优点： 简单直接，数据干净整洁无需后期的清洗；由于是耦合在业务代码中的，数据可以真实反映当时的交互场景。
 * 缺点： 开发工作量大、整个生产过程需要运营、产品、前端都要接入；一旦发生bug，需要hotfix紧急恢复
 

## 可视化埋点

用户每次点击事件中，触发事件的dom元素都会有个唯一确定的`XPath`字符串。前端的埋点sdk需要将这个`xpath`字符串到真正的业务模块的影视发送到服务器。

 * 优点： 数据量准确，后期数据分析成本低
 
 * 缺点： 前期的唯一识别、定位都需要额外开发；可视化平台的开发也需要很高的成本；
 
## 无痕埋点

是无差别的记录用户在前端的所有行为。可以正确的获取PV、UV、IP、Action等基础信息。

 * 优点： 前端开发的工作量很小；数据是全量的，所以后期数据分析师可以拿到各种各样的数据用以分析。
 
 * 缺点： 数据清洗的成本很大；数据量大，导致对数据分析能力的要求也很大。



## 参考文章

> [史上最全的无痕埋点](https://segmentfault.com/a/1190000018741714)
>
> [美团点评前端无痕埋点实践](https://tech.meituan.com/2017/03/02/mt-mobile-analytics-practice.html)
